<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Organization code</title>
    <meta name="description" content="@{Description}" />
    <base href="/" />
    <link rel="stylesheet" href="/css/app.css" />
    <link rel="stylesheet" href="/css/docs.css" />
    <link rel="stylesheet" href="/css/markdown.css" />
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <script>const baseUrl = '/';</script>
    <script src="/js/docs.js"></script>
    <script src="/js/markdown.js"></script>
    
</head>

<body class="dark:bg-neutral-900">
  <div class="text-white py-2 bg-block">
    <div class="container mx-auto flex items-center space-x-4">
      <div class="flex-none">
        <a href="/" class="text-2xl font-semibold hidden sm:block">独思</a>
      </div>
      <div class="flex-grow text-left flex space-x-4 items-center">
         <a href="/blogs.html" class="block py-2 text text-lg">Blogs</a>
<div class="relative dropdown">
  <div>
    <button type="button" class="flex items-center gap-x-1 text text-lg">
      Docs
      <svg class="-mr-1 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
        data-slot="icon">
        <path fill-rule="evenodd"
          d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z"
          clip-rule="evenodd" />
      </svg>
    </button>
  </div>
  <div class="absolute z-10 mt-2 w-56 origin-top-right rounded-md bg-card dropdown-content hidden" tabindex="-1">
    <div class="py-1" role="none">
      <a href="/docs/Ater.Dry\en-us\8.0\ater.dry\Create and run project.html" class="block px-4 py-2 text">Ater.Dry</a>

    </div>
  </div>
</div>
<a href="/about.html" target="_blank" class="block py-2 text text-lg ">About</a>

      </div>
      <div class="flex-none flex items-center">
        <div class="relative dropdown">
    <div class="relative inline-block cursor-pointer">
      <button type="button" class="flex items-center gap-x-1 text text-lg">
        🌐
      </button>
    </div>
    <div class="absolute right-0 mt-1 w-24 rounded-md bg-card dropdown-content hidden z-10 text-center">
        <div id="languageSelect" class="py-1" role="none">
        <a href="javascript:void(0);" onclick="doc.selectLanguage('en-us')" class="block px-3 py-1 text">en-us</a>
        </div>
    </div>
</div>
      </div>
    </div>
    </div>

    <div class="container mx-auto" style="margin-bottom: 48px;">
      <div id="docData" data-id="1737911d022926a936f6058645c2d189" class="hidden" data-docName="Ater.Dry" data-language="en-us" data-version="8.0"></div>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mt-2 pt-2">
        <div class="hidden md:block lg:col-span-1 sticky pe-4 top-0 h-fit">
        <div>
          <strong>Version</strong>
        </div>
        <select id="versionSelect" class="border border-gray-300 rounded-md p-1 my-2 bg-block w-full">

<option value='8.0'>8.0</option>
</select>
<div class="tree">
<ul class="root-list">
<li><span class="caret">ater.dry</span>
<ul class="nested">
<li id="bca779f2a54a1b6b6660444ed10f2609" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Overview.html">Overview</a>
</li>
<li id="a0744561b105d241fa91709a6330b15a" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Install.html">Install</a>
</li>
<li><span class="caret">Studio</span>
<ul class="nested">
<li id="4814688d3e4245189e7e711e6eb3ae3b" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Studio\Dry Studio.html">Dry Studio</a>
</li>
</ul>
<li><span class="caret">Command line</span>
<ul class="nested">
<li id="47555462422a3626bf45f60dd963833e" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\Dto生成.html">Dto生成</a>
</li>
<li id="c745a67bfeb15e317c940aa0a156ce77" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\Manager生成.html">Manager生成</a>
</li>
<li id="5d4604bc02a23014fde8e945d37257b8" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\控制器接口生成.html">控制器接口生成</a>
</li>
<li id="f0c83271debb9ad7c5a58a106e97a5ff" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\前端请求服务生成.html">前端请求服务生成</a>
</li>
<li id="cac017662e8ba889e133d2dd4fd7bd15" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\Studio.html">Studio</a>
</li>
<li id="b5f93d623f3f5f78bbacfbb2ce8190f7" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.dry\Command line\配置.html">配置</a>
</li>
</ul>
</ul>
<li><span class="caret">ater.web</span>
<ul class="nested">
<li id="2c3099cb259235ed434c5424a12d6e4b" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\Overview.html">Overview</a>
</li>
<li><span class="caret">教程</span>
<ul class="nested">
<li id="1f87e08fb251f1c8dc1b9a739ffea127" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\教程\Project Structure.html">Project Structure</a>
</li>
<li><span class="caret">分层项目说明</span>
<ul class="nested">
<li id="37310aea4515ae1cc8bb2ed41d1af06d" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\教程\分层项目说明\Infrastructure.html">Infrastructure</a>
</li>
<li id="aa9cb8d4d1a36edfe5b9dfdf3956b8b2" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\教程\分层项目说明\Definition.html">Definition</a>
</li>
<li id="bd67f9cbe34fcb40c25190b6f68282fd" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\教程\分层项目说明\Application.html">Application</a>
</li>
</ul>
<li id="1737911d022926a936f6058645c2d189" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\教程\Organization code.html">Organization code</a>
</li>
</ul>
<li id="c7a06c536ee6d16f806cc23f63a4d0a6" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\Quick Start.html">Quick Start</a>
</li>
<li><span class="caret">约定和规范</span>
<ul class="nested">
<li id="65741cf66d1bba8349bc586422261719" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\约定和规范\实体定义.html">实体定义</a>
</li>
<li id="13a0dd7fb2d4379fbfc5636affe2e83b" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\约定和规范\第三方依赖.html">第三方依赖</a>
</li>
<li id="2049a2826103af2ed16013f68583e269" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\约定和规范\约定.html">约定</a>
</li>
</ul>
<li><span class="caret">示例</span>
<ul class="nested">
<li id="d64ec904cb67b8d037abb305e8b4386d" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\示例\关注业务逻辑.html">关注业务逻辑</a>
</li>
</ul>
<li><span class="caret">自定义</span>
<ul class="nested">
<li id="6fda4de8924f705125b0a3dbfcc8bbac" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\自定义\自定义Manager行为.html">自定义Manager行为</a>
</li>
</ul>
<li><span class="caret">高级</span>
<ul class="nested">
<li id="ebacd88f40bf7f614a3a285c36a74007" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\高级\日志组件.html">日志组件</a>
</li>
<li id="7203662f15400198b3e3237fe5ea0c84" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\高级\程序初始化.html">程序初始化</a>
</li>
</ul>
<li id="d7769c476d9924727e6e974a5ee52c7c" class="space">
    <a class="text" href="/docs/Ater.Dry\en-us\8.0\ater.web\常见问题.html">常见问题</a>
</li>
</ul>
<li><span class="caret">images</span>
<ul class="nested">
</ul>
</ul>
</div>

        </div>
        <div class="col-span-1 md:col-span-2 lg:col-span-2 markdown-content">
        <h1 id="organization-code">Organization code</h1>
<p>Templates already provide a hierarchy to help us organize the code, and for monolithic applications, organize the code according to the project structure description.</p>
<p>But when we have a lot of developers and a lot of services, maybe we get confused. Here to share with you the corresponding solution, the specific use of which solution is determined by the user himself.</p>
<h2 id="monolithic-application">Monolithic application</h2>
<p>Templates provide structure and<code>Modules</code> that help developers organize code very easily, and have some extensibility and anti-interference for collaborative development (according to module division).
Finally, they all provide interface services through<code>Http.API</code>, which is very easy to understand and implement.</p>
<h2 id="multi-service">Multi-service</h2>
<p>To be clear, multi-services here refers to the fact that when a production environment is released, there will be multiple independent and different application services running.</p>
<p>For multiple services, or splitting into microservices, we can have different implementation scenarios, depending on your team!</p>
<div class="markdown-alert markdown-alert-important">
<p class="markdown-alert-title"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p>
<p>For the choice of solutions should consider the overall development experience of the team, which is mainly reflected in the development efficiency, implementation difficulty, risk and other aspects, do not sacrifice their own and team energy and time in order to achieve what others call &quot;design patterns&quot;.</p>
</div>
<h3 id="multiservice-sharing-business-code">Multiservice sharing business code</h3>
<p>This programme is very easy to implement and understand, and its main features are as follows:</p>
<ul>
<li>I need to deploy multiple services at deployment time so that each service can be highly available.</li>
<li>My services share business logic code, and different services just open different interfaces (Http/Grpc).</li>
</ul>
<p>This scenario makes things simple, assuming we end up deploying three services</p>
<ul>
<li>User Interface Service:<code>Http.API</code></li>
<li>Administrator Interface Service:<code>AdminService</code></li>
<li>Customer Order Service:<code>OrderService</code></li>
</ul>
<p>This means that we will have three<code>WebAPI</code> projects and we will create<code>AdminService</code> and<code>OrderService</code> projects in<code>Microservice</code>.</p>
<p>We will develop in two ways:</p>
<h4 id="1-shared-business-code">1 Shared Business Code</h4>
<ul>
<li>All entities are defined in<code>Entity</code>, and all business logic is implemented in<code>Application</code>.</li>
<li>All services reference<code>Application</code> project, but define only those interfaces that need to be open to the outside world.</li>
</ul>
<p>This means that projects share all business logic, which is not split and decoupled according to service.</p>
<h4 id="2-use-modules-to-split-business-code">2 Use modules to split business code</h4>
<ul>
<li>All entities are defined in<code>Entity</code></li>
<li>Create<code>UserMod</code>,<code>AdminMod</code> and<code>OrderMod</code> modules respectively to implement the business logic (i.e.<code>Manager</code>) of each module.</li>
<li><code>Http.API</code>project references<code>UserMod</code>,<code>AdminService</code> references<code>AdminMod</code>,<code>OrderService</code> references<code>OrderMod</code>.</li>
</ul>
<p>This allows decoupling of business logic, where services reference only their own business implementations.</p>
<p>Since each module still needs to reference<code>Application</code> project, this means that if there is a common business, it can still be reused, and of course this also means that each service is still not completely independent and decoupled.</p>
<p>We can see that through module segmentation, we can flexibly split business logic and deployment, and at the same time, we can reuse some code to a certain extent. This is sufficient for most cases.</p>
<p>If you must implement more independent and decoupled services, read on!</p>
<h2 id="microservices-individual-items-for-each-service">Microservices (individual items for each service)</h2>
<p>Before we go into specifics, we need to consider a few practical questions:</p>
<ul>
<li>Are there multiple teams implementing microservices</li>
<li>Is it implemented in multiple languages</li>
<li>Whether services use a uniform communication protocol, such as Grpc/Http, or inter-service communication through message queues.</li>
</ul>
<p>This involves collaboration between teams and services, which can be very complex. In order to simplify the problem, we give some qualifications to facilitate a better discussion.</p>
<blockquote>
<p>If our team uses a unified language and framework to implement microservices</p>
</blockquote>
<p>We'll talk about that earlier. And then we still have some questions:</p>
<ul>
<li>Does one solution correspond to one service?</li>
<li>Does one solution include all services</li>
<li>Does each service have its own independent repository</li>
</ul>
<p>We still need to assume some scenarios for these questions in order to better discuss them.</p>
<blockquote>
<ul>
<li>Manage all service codes in one repository (master repository) or as a sub-repository of the master repository if the service has its own repository.</li>
<li>Manage all projects with one solution.</li>
</ul>
</blockquote>
<p>Working with solutions is a very natural thing for. NET developers, which means you can work on multiple projects in one IDE instance.</p>
<p>Next, suppose we need to follow<code>DDD</code> 's microservices practice and keep services separate, how should we implement it?</p>
<p>Let's make a few points clear:</p>
<ul>
<li>Each service contains only its own entity (domain) model</li>
<li>Each service contains only its own implementation of business logic</li>
<li>Each service only provides interfaces to domain services</li>
<li>Each service has its own configuration and dependencies</li>
<li>Each service has its own build and deployment requirements</li>
</ul>
<p>In short, services are almost completely independent. For those that cannot reuse business logic codes, functional codes can be reused through class libraries.</p>
<h3 id="1-creating-multiple-solutions">1. Creating multiple solutions</h3>
<p>One option is to create a template project for each service and develop it entirely independently.</p>
<p>So how should we coordinate? We can create a separate solution, add service items to that solution, and then use<code>.NET Aspire</code> for debugging.</p>
<h3 id="2-use-only-one-solution">2. Use only one solution</h3>
<p><code>Ater.Dry</code>can also be used to add new standalone services to existing solutions, or you can create your own<code>Http</code> or<code>GRPC</code> services.</p>
<p>These independent services have their own entity definitions, database contexts, business implementation layers, and interface layers. These hierarchies no longer exist as <code>project</code>, but as <code>folder</code>.
This is easy to understand because all code works only within the current service and does not need to be packaged into projects to be referenced by other projects.</p>
<p><code>Ater.Dry</code>will automatically discover microservice items under the solution, and code generation can also identify entities in microservices and generate code in corresponding services.</p>
<div class="markdown-alert markdown-alert-note">
<p class="markdown-alert-title"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>Code generation only supports standalone services created using<code>Dry Studio</code>because it contains the default file directory hierarchy.</p>
<p>If you use<code>.NET Aspire</code> for microservice development debugging, manually add the new service to<code>AppHost</code>after you create it.</p>
</div>
<h2 id="recommendations">Recommendations</h2>
<p>Depending on the situation, if your team or business requirements do not require you to split services independently, we recommend that you split business logic in modules.</p>
<p>If you must implement independent services, we recommend that you manage the entire project using a solution that encompasses all services.</p>

        </div>
        <div class="hidden lg:block lg:col-span-1">
        <div class="toc-block sticky top-2">
 <p class="text-lg">导航</p>
<ul class="toc">
<li>
  <a href="javascript:void(0);" onclick="window.location.href=window.location.href.split('#')[0]+'#monolithic-application'">Monolithic application</a>
</li>
<li>
  <a href="javascript:void(0);" onclick="window.location.href=window.location.href.split('#')[0]+'#multi-service'">Multi-service</a>
</li>
<li>
  <a href="javascript:void(0);" onclick="window.location.href=window.location.href.split('#')[0]+'#microservices-(individual-items-for-each-service)'">Microservices (individual items for each service)</a>
</li>
<li>
  <a href="javascript:void(0);" onclick="window.location.href=window.location.href.split('#')[0]+'#recommendations'">Recommendations</a>
</li>
</ul>
</div>

        </div>
      </div>
    </div>
    <div class="footer py-2 bottom-0 w-full fixed">
    <div class="container mx-auto text-center">
        <p class="text-neutral-600 dark:text-neutral-300 mb-0">
        独思
        <a class="text-blue-600" target="_blank" href="https://github.com/AterDev/EasyBlog">Powered by Ater Blog</a>
        </p>
    </div>
  </div>
</body>
</html>